import tweepy
from tweepy import OAuthHandler
import snipsDefaults as snips

locationDict = {'Dominican Republic': ['23424800'], 'Jeddah': ['1939873'], 'Orlando': ['2466256'], 'Pozna?': ['514048'], 'Korea': ['23424868'], 'Quezon City': ['1199682'], 'Vancouver': ['9807'], 'Belarus': ['23424765'], 'Chicago': ['2379574'], 'Israel': ['23424852'], 'Dubai': ['1940345'], 'Montpellier': ['612977'], 'Edmonton': ['8676'], 'Culiac\xa0n': ['117994'], 'Kanpur': ['2295378'], 'Memphis': ['2449323'], 'Frankfurt': ['650272'], 'Hamburg': ['656958'], 'Tucson': ['2508428'], 'Toulouse': ['628886'], 'Medina': ['1937801'], 'Rajkot': ['2295404'], 'Venezuela': ['23424982'], 'Chiba': ['1117034'], 'Medell¡n': ['368150'], 'Zaporozhye': ['939628'], 'Indianapolis': ['2427032'], 'Minsk': ['834463'], 'Volgograd': ['2124298'], 'Bordeaux': ['580778'], 'Bristol': ['13963'], 'Sendai': ['1118129'], 'Las Palmas': ['764814'], 'Pune': ['2295412'], 'Madrid': ['766273'], 'Amman': ['1968902'], 'Brighton': ['13911'], 'Marseille': ['610264'], 'Maracaibo': ['395270'], 'Palma': ['769293'], 'Saint Petersburg': ['2123260'], 'Strasbourg': ['627791'], 'Norway': ['23424910'], 'Vietnam': ['23424984'], 'Makati': ['1180689'], 'Rio de Janeiro': ['455825'], 'Minneapolis': ['2452078'], 'Antalya': ['2343733'], 'Naucalpan de Ju\xa0rez': ['134395'], 'Valparaiso': ['349861'], 'Paris': ['615702'], 'Morelia': ['134091'], 'Mecca': ['1939897'], 'Haifa': ['1967449'], 'Mexico': ['23424900'], 'Matur¡n': ['468384'], 'Mersin': ['2323778'], 'Tokyo': ['1118370'], 'Bandung': ['1047180'], 'Harrisburg': ['2418046'], 'Gwangju': ['1132481'], 'Donetsk': ['919163'], 'Cincinnati': ['2380358'], 'Portugal': ['23424925'], 'Quito': ['375732'], 'Baton Rouge': ['2359991'], 'Preston': ['32566'], 'Oslo': ['862592'], 'Guatemala': ['23424834'], 'Worldwide': ['1'], 'M\x82rida': ['133327'], 'San Diego': ['2487889'], 'Hull': ['25211'], 'Ulsan': ['1132578'], 'Palermo': ['719846'], 'Lausanne': ['783058'], 'Liverpool': ['26734'], 'Lima': ['418440'], 'Faisalabad': ['2211574'], 'Ottawa': ['3369'], 'Omaha': ['2465512'], 'Derby': ['18114'], 'Mumbai': ['2295411'], 'Gothenburg': ['890869'], 'Acapulco': ['110978'], 'Durban': ['1580913'], 'Genoa': ['716085'], 'Kumamoto': ['1117605'], 'Kitakyushu': ['1110809'], 'Seoul': ['1132599'], 'Riyadh': ['1939753'], 'Voronezh': ['2108210'], 'Sydney': ['1105779'], 'Manaus': ['455833'], 'Jaipur': ['2295401'], 'Providence': ['2477058'], 'Yongin': ['1132094'], 'Caracas': ['395269'], 'Blackpool': ['12903'], 'Zurich': ['784794'], 'Los Angeles': ['2442047'], 'Krak¢w': ['502075'], 'Concepcion': ['349860'], 'United Kingdom': ['23424975'], 'Montreal': ['3534'], 'Gda?sk': ['493417'], 'Cologne': ['667931'], 'Puerto Rico': ['23424935'], 'C¢rdoba': ['466861'], 'Salvador': ['455826'], 'New Haven': ['2458410'], 'Belgium': ['23424757'], 'Novosibirsk': ['2122541'], 'Baltimore': ['2358820'], 'Perth': ['1098081'], 'Bahrain': ['23424753'], 'Maracay': ['395271'], 'Greece': ['23424833'], 'Hyderabad': ['2295414'], 'Albuquerque': ['2352824'], 'New York': ['2459115'], 'Argentina': ['23424747'], 'Leeds': ['26042'], 'Riga': ['854823'], 'Thane': ['2295410'], 'Ankara': ['2343732'], 'Guadalajara': ['124162'], 'Krasnoyarsk': ['2029043'], 'Bangalore': ['2295420'], 'Muscat': ['2268284'], 'Valencia': ['395272', '776688'], 'Cape Town': ['1591691'], 'Chihuahua': ['115958'], 'Indore': ['2295408'], 'Long Beach': ['2441472'], 'San Luis Potos¡': ['144265'], 'Bilbao': ['754542'], 'Lucknow': ['2295377'], 'Tijuana': ['149361'], 'Srinagar': ['2295387'], 'Calocan': ['1167715'], 'Puebla': ['137612'], 'Essen': ['648820'], 'Hiroshima': ['1117227'], 'Rawalpindi': ['2211387'], 'Austria': ['23424750'], 'Leipzig': ['671072'], 'Bournemouth': ['13383'], 'Delhi': ['20070458'], 'Portland': ['2475687'], 'Ranchi': ['2295383'], 'Toluca': ['149769'], 'Ahsa': ['56120136'], 'United Arab Emirates': ['23424738'], 'Santo Domingo': ['76456'], 'France': ['23424819'], 'Port Elizabeth': ['1586614'], 'Khabarovsk': ['2018708'], 'Salt Lake City': ['2487610'], 'Colombia': ['23424787'], 'Tangerang': ['1048536'], 'Mesa': ['2449808'], 'Jacksonville': ['2428344'], 'Petaling': ['56013632'], 'Japan': ['23424856'], 'Quer\x82taro': ['138045'], 'Tampa': ['2503863'], 'Edinburgh': ['19344'], 'Virginia Beach': ['2512636'], 'Stockholm': ['906057'], 'Malaysia': ['23424901'], 'Da Nang': ['1252376'], 'Hai Phong': ['1236690'], 'Saitama': ['1116753'], 'Recife': ['455824'], 'South Africa': ['23424942'], 'Leicester': ['26062'], 'Kyiv': ['924938'], 'Curitiba': ['455822'], 'Amsterdam': ['727232'], 'Ecuador': ['23424801'], 'Belo Horizonte': ['455821'], 'Ciudad Juarez': ['116556'], 'Stoke-on-Trent': ['36240'], 'Can Tho': ['1252351'], 'San Francisco': ['2487956'], 'Darwin': ['1101597'], 'Okinawa': ['2345896'], 'Klang': ['1154726'], 'Milwaukee': ['2451822'], 'Medan': ['1047908'], 'Chelyabinsk': ['1997422'], 'Germany': ['23424829'], 'Osaka': ['15015370'], 'San Jose': ['2488042'], 'Goyang': ['1130853'], 'Zaragoza': ['779063'], 'Bursa': ['2343843'], 'Santiago': ['349859'], 'Cardiff': ['15127'], 'Ho Chi Minh City': ['1252431'], 'Quebec': ['3444'], 'Algiers': ['1253079'], 'Busan': ['1132447'], 'Moscow': ['2122265'], 'Brisbane': ['1100661'], 'Bel\x82m': ['455820'], 'Incheon': ['1132496'], 'Malaga': ['766356'], 'Multan': ['2211269'], 'Milan': ['718345'], 'Coventry': ['17044'], 'Atlanta': ['2357024'], 'Patna': ['2295381'], 'Saltillo': ['141272'], 'Karachi': ['2211096'], 'Colorado Springs': ['2383489'], 'Houston': ['2424766'], 'Turkey': ['23424969'], 'Yekaterinburg': ['2112237'], 'Samara': ['2077746'], 'Dammam': ['1939574'], 'Washington': ['2514815'], 'Konya': ['2344210'], 'Surat': ['2295405'], 'India': ['23424848'], 'Daegu': ['1132466'], 'Fukuoka': ['1117099'], 'Bogot\xa0': ['368148'], 'Dresden': ['645686'], 'Thailand': ['23424960'], 'Cali': ['368149'], 'Murcia': ['768026'], 'Cork': ['560472'], 'Port Harcourt': ['1404447'], 'Taguig': ['1195098'], 'Grodno': ['825848'], 'Panama': ['23424924'], 'Jordan': ['23424860'], 'Lahore': ['2211177'], 'Munich': ['676757'], 'Makassar': ['1046138'], 'Palembang': ['1048059'], 'Perm': ['2122814'], 'Warsaw': ['523920'], 'Birmingham': ['12723', '2364559'], 'Charlotte': ['2378426'], 'New Orleans': ['2458833'], 'San Antonio': ['2487796'], 'Newcastle': ['30079'], 'Utrecht': ['734047'], 'Dortmund': ['645458'], 'Hamamatsu': ['1117155'], 'Tallahassee': ['2503713'], 'Buenos Aires': ['468739'], 'Nagoya': ['1117817'], 'Kawasaki': ['1117502'], 'Norfolk': ['2460389'], 'Lyon': ['609125'], 'Nashville': ['2457170'], 'Jackson': ['2428184'], 'Kolkata': ['2295386'], 'Kajang': ['1141268'], 'Zapopan': ['151582'], 'Ansan': ['1132444'], 'Sapporo': ['1118108'], 'Guarulhos': ['455867'], 'Johor Bahru': ['1154698'], 'Rotterdam': ['733075'], 'Singapore': ['1062617', '23424948'], 'Gaziantep': ['2343999'], 'Greensboro': ['2414469'], 'Pittsburgh': ['2473224'], 'Amritsar': ['2295388'], 'Canada': ['23424775'], 'Accra': ['1326075'], 'Glasgow': ['21125'], 'Diyarbak?r': ['2343932'], 'Switzerland': ['23424957'], 'Sharjah': ['1940119'], 'S?o Lu¡s': ['455834'], 'Rennes': ['619163'], 'Portsmouth': ['32452'], 'Bekasi': ['1030077'], 'Gomel': ['825978'], 'Kyoto': ['15015372'], 'Seville': ['774508'], 'Daejeon': ['2345975'], 'Manchester': ['28218'], 'Kuala Lumpur': ['1154781'], 'Belfast': ['44544'], 'Denmark': ['23424796'], 'Seattle': ['2490383'], 'Jerusalem': ['1968222'], 'Okayama': ['90036018'], 'Kayseri': ['2344174'], 'Soweto': ['1587677'], 'Barcelona': ['395273', '753692'], 'Swansea': ['36758'], 'Benin City': ['1387660'], 'Naples': ['719258'], 'Irkutsk': ['2121040'], 'Ufa': ['2124045'], 'Jakarta': ['1047378'], 'Vienna': ['551801'], 'Dusseldorf': ['646099'], 'Seongnam': ['1132559'], 'London': ['44418'], 'Pakistan': ['23424922'], 'Austin': ['2357536'], 'Kaduna': ['1396439'], 'Bucheon': ['1132445'], 'Melbourne': ['1103816'], 'Berlin': ['638242'], 'Hanoi': ['1236594'], 'Kobe': ['1117545'], 'Manila': ['1199477'], 'Bhopal': ['2295407'], 'Raleigh': ['2478307'], 'Cebu City': ['1199079'], 'Netherlands': ['23424909'], 'Niigata': ['1117881'], 'Toronto': ['4118'], 'Indonesia': ['23424846'], 'Depok': ['1032539'], 'Oman': ['23424898'], 'St. Louis': ['2486982'], 'Guayaquil': ['375733'], 'Wroclaw': ['526363'], 'Las Vegas': ['2436704'], 'Peru': ['23424919'], 'Ibadan': ['1393672'], 'Lagos': ['1398823'], 'Geneva': ['782538'], 'Odesa': ['929398'], 'United States': ['23424977'], 'Eski?ehir': ['2343980'], 'Saudi Arabia': ['23424938'], 'Ireland': ['23424803'], 'Rostov-on-Don': ['2123177'], 'Izmir': ['2344117'], 'Calgary': ['8775'], 'Bremen': ['641142'], 'Pekanbaru': ['1040779'], 'Fresno': ['2407517'], 'Bologna': ['711080'], 'Kumasi': ['1330595'], 'Bangkok': ['1225448'], 'Adelaide': ['1099805'], 'Campinas': ['455828'], 'Nagpur': ['2282863'], 'Rome': ['721943'], 'Egypt': ['23424802'], 'S?o Paulo': ['455827'], 'Ukraine': ['23424976'], 'Changwon': ['1132449'], 'Hermosillo': ['124785'], 'Winnipeg': ['2972'], 'Monterrey': ['134047'], 'Brest': ['824382'], 'Spain': ['23424950'], 'Chennai': ['2295424'], 'Turin': ['725003'], 'Oklahoma City': ['2464592'], 'Lille': ['608105'], 'Ipoh': ['1154679'], 'Algeria': ['23424740'], 'Plymouth': ['32185'], 'Russia': ['23424936'], 'Pretoria': ['1586638'], 'Philadelphia': ['2471217'], 'Kansas City': ['2430683'], 'Istanbul': ['2344116'], 'Mombasa': ['1528335'], 'Cleveland': ['2381475'], 'Mexico City': ['116545'], 'Porto Alegre': ['455823'], 'Kuwait': ['23424870'], 'Ahmedabad': ['2295402'], 'Nottingham': ['30720'], 'Miami': ['2450022'], 'Turmero': ['395277'], 'Le¢n': ['131068'], 'Tel Aviv': ['1968212'], 'Middlesbrough': ['28869'], 'Stuttgart': ['698064'], 'Lebanon': ['23424873'], 'Fortaleza': ['455830'], 'Detroit': ['2391585'], 'Nairobi': ['1528488'], 'Davao City': ['1199136'], 'New Zealand': ['23424916'], 'Nezahualc¢yotl': ['116564'], 'Nigeria': ['23424908'], 'Qatar': ['23424930'], 'Galway': ['560912'], 'Sheffield': ['34503'], 'Rosario': ['466862'], 'Richmond': ['2480894'], 'Honolulu': ['2423945'], 'Phoenix': ['2471390'], 'Sacramento': ['2486340'], 'Auckland': ['2348079'], 'Barranquilla': ['368151'], 'Guatemala City': ['83123'], 'Australia': ['23424748'], 'Dallas-Ft. Worth': ['2388929'], 'Sweden': ['23424954'], 'Lviv': ['924943'], 'Adana': ['2343678'], 'Latvia': ['23424874'], 'Italy': ['23424853'], 'Ghana': ['23424824'], 'Denver': ['2391279'], 'Ecatepec de Morelos': ['118466'], 'Nizhny Novgorod': ['2122471'], 'Boston': ['2367105'], 'Yokohama': ['1118550'], 'Goi\x83nia': ['455831'], 'Hulu Langat': ['56013645'], 'Den Haag': ['726874'], 'Surabaya': ['1044316'], 'Giza': ['1521643'], 'Brazil': ['23424768'], 'Vladivostok': ['2124288'], 'Zamboanga City': ['1199980'], 'Kharkiv': ['922137'], 'Barquisimeto': ['468382'], 'Nantes': ['613858'], 'Philippines': ['23424934'], 'Bergen': ['857105'], 'El Paso': ['2397816'], 'Thessaloniki': ['963291'], 'Kenya': ['23424863'], 'Abu Dhabi': ['1940330'], 'Athens': ['946738'], 'Aguascalientes': ['111579'], 'Takamatsu': ['1118285'], 'Kazan': ['2121267'], 'Krasnodar': ['2028717'], 'Suwon': ['1132567'], 'Cairo': ['1521894'], 'Mexicali': ['133475'], 'Ciudad Guayana': ['395275'], 'Dublin': ['560743'], 'Pasig': ['1187115'], 'Omsk': ['2122641'], 'Mendoza': ['332471'], 'Canberra': ['1100968'], 'Semarang': ['1048324'], 'Johannesburg': ['1582504'], 'Louisville': ['2442327'], 'Chile': ['23424782'], 'Sagamihara': ['1118072'], 'Alexandria': ['1522006'], 'Poland': ['23424923'], 'Cagayan de Oro': ['1199002'], 'Lodz': ['505120'], 'Dnipropetrovsk': ['918981'], 'Kano': ['1396803'], 'Columbus': ['2383660'], 'Bras¡lia': ['455819'], 'Antipolo': ['1198785']}

def run(msg):
	auth = OAuthHandler(snips.consumerkey,snips.consumersecret)
	auth.set_access_token(snips.appkey,snips.appsecret)
	api = tweepy.API(auth)
	data = parse_slots(msg)
	print(locationDict.get(data['location'])[0])
	trends = api.trends_place(int(locationDict.get(data['location'])[0]))
	trendingIn = trends[0]['trends']
	trending = trendingIn[:10]
	message = "The following topics are trending in " + data['location'] + '. '
	for trend in trending:
		print(trend['name'])
		message = ''.join([message,', ',trend['name']])
	return message
	
def parse_slots(data):
	return dict((slot['slotName'], slot['value']['value']) for slot in data['slots'])